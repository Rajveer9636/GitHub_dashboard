
    <!DOCTYPE html>
    <html>
    <head>
        <title>Simulator Strategy Positions and PnL Viewer</title>
        <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
        <style>
            body {
                margin: 20px;
            }
            h1 {
                background: orange;
                color: white;
                padding: 15px;
                text-align: center;
                border-radius: 10px;
            }
            .section {
                margin-bottom: 30px;
            }
            table {
                width: 100%;
                border-collapse: collapse;
            }
            th, td {
                border: 1px solid #ccc;
                padding: 8px;
                text-align: center;
            }
            th {
                background: #eee;
            }
        </style>
    </head>
    <body>
        <h1>Simulator Strategy Positions and PnL Viewer</h1>

        <div class="section">
            <h4>üìÅ Portfolio-wise Total PnL</h4>
            <table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Portfolio</th>
      <th>TotalPnL</th>
      <th>Total margin</th>
      <th>PnL_%[on margin]</th>
      <th>Book_Percentage</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>MS</td>
      <td>78284.0</td>
      <td>2202884.0</td>
      <td>3.55%</td>
      <td>0.44%</td>
    </tr>
  </tbody>
</table>
        </div>

        <div class="section">
            <h4>üìä Index-wise Total PnL</h4>
            <table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Index</th>
      <th>TotalPnL</th>
      <th>Total margin</th>
      <th>percentage</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>sensex</td>
      <td>78284.0</td>
      <td>9666800.0</td>
      <td>0.81%</td>
    </tr>
  </tbody>
</table>
        </div>

        <div class="section">
            <h4>üèÜ Grand Total PnL</h4>
            <table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Total_PnL</th>
      <th>Total_margin</th>
      <th>PnL_%[on margin]</th>
      <th>Book_Percentage</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>78284.0</td>
      <td>2202884.0</td>
      <td>3.55%</td>
      <td>0.44%</td>
    </tr>
  </tbody>
</table>
        </div>

        <div class="section">
            <h4>üìà Portfolio-wise Total PnL Chart</h4>
            <div id="chart" style="height: 800px;"></div>
        </div>

        <script>
            var chartData = {"Minute": ["1900-01-01 09:23:00", "1900-01-01 09:24:00", "1900-01-01 09:25:00", "1900-01-01 09:26:00", "1900-01-01 09:27:00", "1900-01-01 09:28:00", "1900-01-01 09:29:00", "1900-01-01 09:30:00", "1900-01-01 09:31:00", "1900-01-01 09:32:00", "1900-01-01 09:33:00", "1900-01-01 09:34:00", "1900-01-01 09:35:00", "1900-01-01 09:36:00", "1900-01-01 09:37:00", "1900-01-01 09:38:00", "1900-01-01 09:39:00", "1900-01-01 09:40:00", "1900-01-01 09:41:00", "1900-01-01 09:42:00", "1900-01-01 09:43:00", "1900-01-01 09:44:00", "1900-01-01 09:45:00", "1900-01-01 09:46:00", "1900-01-01 09:47:00", "1900-01-01 09:48:00", "1900-01-01 09:49:00", "1900-01-01 09:50:00", "1900-01-01 09:51:00", "1900-01-01 09:52:00", "1900-01-01 09:53:00", "1900-01-01 09:54:00", "1900-01-01 09:55:00", "1900-01-01 09:56:00", "1900-01-01 09:57:00", "1900-01-01 09:58:00", "1900-01-01 09:59:00", "1900-01-01 10:00:00", "1900-01-01 10:01:00", "1900-01-01 10:02:00", "1900-01-01 10:03:00", "1900-01-01 10:04:00", "1900-01-01 10:05:00", "1900-01-01 10:06:00", "1900-01-01 10:07:00", "1900-01-01 10:08:00", "1900-01-01 10:09:00", "1900-01-01 10:10:00", "1900-01-01 10:11:00", "1900-01-01 10:12:00", "1900-01-01 10:13:00", "1900-01-01 10:14:00", "1900-01-01 10:15:00", "1900-01-01 10:16:00", "1900-01-01 10:17:00", "1900-01-01 10:18:00", "1900-01-01 10:19:00", "1900-01-01 10:20:00", "1900-01-01 10:21:00", "1900-01-01 10:22:00", "1900-01-01 10:23:00", "1900-01-01 10:24:00", "1900-01-01 10:25:00", "1900-01-01 10:26:00", "1900-01-01 10:27:00", "1900-01-01 10:28:00", "1900-01-01 10:29:00", "1900-01-01 10:30:00", "1900-01-01 10:31:00", "1900-01-01 10:32:00", "1900-01-01 10:33:00", "1900-01-01 10:34:00", "1900-01-01 10:35:00", "1900-01-01 10:36:00", "1900-01-01 10:37:00", "1900-01-01 10:38:00", "1900-01-01 10:39:00", "1900-01-01 10:40:00", "1900-01-01 10:41:00", "1900-01-01 10:42:00", "1900-01-01 10:43:00", "1900-01-01 10:44:00", "1900-01-01 10:45:00", "1900-01-01 10:46:00", "1900-01-01 10:47:00", "1900-01-01 10:48:00", "1900-01-01 10:49:00", "1900-01-01 10:50:00", "1900-01-01 10:51:00", "1900-01-01 10:52:00", "1900-01-01 10:53:00", "1900-01-01 10:54:00", "1900-01-01 10:55:00", "1900-01-01 10:56:00", "1900-01-01 10:57:00", "1900-01-01 10:58:00", "1900-01-01 10:59:00", "1900-01-01 11:00:00", "1900-01-01 11:01:00", "1900-01-01 11:02:00", "1900-01-01 11:03:00", "1900-01-01 11:04:00", "1900-01-01 11:05:00", "1900-01-01 11:06:00", "1900-01-01 11:07:00", "1900-01-01 11:08:00", "1900-01-01 11:09:00", "1900-01-01 11:10:00", "1900-01-01 11:11:00", "1900-01-01 11:12:00", "1900-01-01 11:13:00", "1900-01-01 11:14:00", "1900-01-01 11:15:00", "1900-01-01 11:16:00", "1900-01-01 11:17:00", "1900-01-01 11:18:00", "1900-01-01 11:19:00", "1900-01-01 11:20:00", "1900-01-01 11:21:00", "1900-01-01 11:22:00", "1900-01-01 11:23:00", "1900-01-01 11:24:00", "1900-01-01 11:25:00", "1900-01-01 11:26:00", "1900-01-01 11:27:00", "1900-01-01 11:28:00", "1900-01-01 11:29:00", "1900-01-01 11:30:00", "1900-01-01 11:31:00", "1900-01-01 11:32:00", "1900-01-01 11:33:00", "1900-01-01 11:34:00", "1900-01-01 11:35:00", "1900-01-01 11:36:00", "1900-01-01 11:37:00", "1900-01-01 11:38:00", "1900-01-01 11:39:00", "1900-01-01 11:40:00", "1900-01-01 11:41:00", "1900-01-01 11:42:00", "1900-01-01 11:43:00", "1900-01-01 11:44:00", "1900-01-01 11:45:00", "1900-01-01 11:46:00", "1900-01-01 11:47:00", "1900-01-01 11:48:00", "1900-01-01 11:49:00", "1900-01-01 11:50:00", "1900-01-01 11:51:00", "1900-01-01 11:52:00", "1900-01-01 11:53:00", "1900-01-01 11:54:00", "1900-01-01 11:55:00", "1900-01-01 11:56:00", "1900-01-01 11:57:00", "1900-01-01 11:58:00", "1900-01-01 11:59:00", "1900-01-01 12:00:00", "1900-01-01 12:01:00", "1900-01-01 12:02:00", "1900-01-01 12:03:00", "1900-01-01 12:04:00", "1900-01-01 12:05:00", "1900-01-01 12:06:00", "1900-01-01 12:07:00", "1900-01-01 12:08:00", "1900-01-01 12:09:00", "1900-01-01 12:10:00", "1900-01-01 12:11:00", "1900-01-01 12:12:00", "1900-01-01 12:13:00", "1900-01-01 12:14:00", "1900-01-01 12:15:00", "1900-01-01 12:16:00", "1900-01-01 12:17:00", "1900-01-01 12:18:00", "1900-01-01 12:19:00", "1900-01-01 12:20:00", "1900-01-01 12:21:00", "1900-01-01 12:22:00", "1900-01-01 12:23:00", "1900-01-01 12:24:00", "1900-01-01 12:25:00", "1900-01-01 12:26:00", "1900-01-01 12:27:00", "1900-01-01 12:28:00", "1900-01-01 12:29:00", "1900-01-01 12:30:00", "1900-01-01 12:31:00", "1900-01-01 12:32:00", "1900-01-01 12:33:00", "1900-01-01 12:34:00", "1900-01-01 12:35:00", "1900-01-01 12:36:00", "1900-01-01 12:37:00", "1900-01-01 12:38:00", "1900-01-01 12:39:00", "1900-01-01 12:40:00", "1900-01-01 12:41:00", "1900-01-01 12:42:00", "1900-01-01 12:43:00", "1900-01-01 12:44:00", "1900-01-01 12:45:00", "1900-01-01 12:46:00", "1900-01-01 12:47:00", "1900-01-01 12:48:00", "1900-01-01 12:49:00", "1900-01-01 12:50:00", "1900-01-01 12:51:00", "1900-01-01 12:52:00", "1900-01-01 12:53:00", "1900-01-01 12:54:00", "1900-01-01 12:55:00", "1900-01-01 12:56:00", "1900-01-01 12:57:00", "1900-01-01 12:58:00", "1900-01-01 12:59:00", "1900-01-01 13:00:00", "1900-01-01 13:01:00", "1900-01-01 13:02:00", "1900-01-01 13:03:00", "1900-01-01 13:04:00", "1900-01-01 13:05:00", "1900-01-01 13:06:00", "1900-01-01 13:07:00", "1900-01-01 13:08:00", "1900-01-01 13:09:00", "1900-01-01 13:10:00", "1900-01-01 13:11:00", "1900-01-01 13:12:00", "1900-01-01 13:13:00", "1900-01-01 13:14:00", "1900-01-01 13:15:00", "1900-01-01 13:16:00", "1900-01-01 13:17:00", "1900-01-01 13:18:00", "1900-01-01 13:19:00", "1900-01-01 13:20:00", "1900-01-01 13:21:00", "1900-01-01 13:22:00", "1900-01-01 13:23:00", "1900-01-01 13:24:00", "1900-01-01 13:25:00", "1900-01-01 13:26:00", "1900-01-01 13:27:00", "1900-01-01 13:28:00", "1900-01-01 13:29:00", "1900-01-01 13:30:00", "1900-01-01 13:31:00", "1900-01-01 13:32:00", "1900-01-01 13:33:00", "1900-01-01 13:34:00", "1900-01-01 13:35:00", "1900-01-01 13:36:00", "1900-01-01 13:37:00", "1900-01-01 13:38:00", "1900-01-01 13:39:00", "1900-01-01 13:40:00", "1900-01-01 13:41:00", "1900-01-01 13:42:00", "1900-01-01 13:43:00", "1900-01-01 13:44:00", "1900-01-01 13:45:00", "1900-01-01 13:46:00", "1900-01-01 13:47:00", "1900-01-01 13:48:00", "1900-01-01 13:49:00", "1900-01-01 13:50:00", "1900-01-01 13:51:00", "1900-01-01 13:52:00", "1900-01-01 13:53:00", "1900-01-01 13:54:00", "1900-01-01 13:55:00", "1900-01-01 13:56:00", "1900-01-01 13:57:00", "1900-01-01 13:58:00", "1900-01-01 13:59:00", "1900-01-01 14:00:00", "1900-01-01 14:01:00", "1900-01-01 14:02:00", "1900-01-01 14:03:00", "1900-01-01 14:04:00", "1900-01-01 14:05:00", "1900-01-01 14:06:00", "1900-01-01 14:07:00", "1900-01-01 14:08:00", "1900-01-01 14:09:00", "1900-01-01 14:10:00", "1900-01-01 14:11:00", "1900-01-01 14:12:00", "1900-01-01 14:13:00", "1900-01-01 14:14:00", "1900-01-01 14:15:00", "1900-01-01 14:16:00", "1900-01-01 14:17:00", "1900-01-01 14:18:00", "1900-01-01 14:19:00", "1900-01-01 14:20:00", "1900-01-01 14:21:00", "1900-01-01 14:22:00", "1900-01-01 14:23:00", "1900-01-01 14:24:00", "1900-01-01 14:25:00", "1900-01-01 14:26:00", "1900-01-01 14:27:00", "1900-01-01 14:28:00", "1900-01-01 14:29:00", "1900-01-01 14:30:00", "1900-01-01 14:31:00", "1900-01-01 14:32:00", "1900-01-01 14:33:00", "1900-01-01 14:34:00", "1900-01-01 14:35:00", "1900-01-01 14:36:00", "1900-01-01 14:37:00", "1900-01-01 14:38:00", "1900-01-01 14:39:00", "1900-01-01 14:40:00", "1900-01-01 14:41:00", "1900-01-01 14:42:00", "1900-01-01 14:43:00", "1900-01-01 14:44:00", "1900-01-01 14:45:00", "1900-01-01 14:46:00", "1900-01-01 14:47:00", "1900-01-01 14:48:00", "1900-01-01 14:49:00", "1900-01-01 14:50:00", "1900-01-01 14:51:00", "1900-01-01 14:52:00", "1900-01-01 14:53:00", "1900-01-01 14:54:00", "1900-01-01 14:55:00", "1900-01-01 14:56:00", "1900-01-01 14:57:00", "1900-01-01 14:58:00", "1900-01-01 14:59:00", "1900-01-01 15:00:00", "1900-01-01 15:01:00", "1900-01-01 15:02:00", "1900-01-01 15:03:00", "1900-01-01 15:04:00", "1900-01-01 15:05:00", "1900-01-01 15:06:00", "1900-01-01 15:07:00", "1900-01-01 15:08:00", "1900-01-01 15:09:00", "1900-01-01 15:10:00", "1900-01-01 15:11:00", "1900-01-01 15:12:00", "1900-01-01 15:13:00", "1900-01-01 15:14:00", "1900-01-01 15:15:00", "1900-01-01 15:16:00", "1900-01-01 15:17:00", "1900-01-01 15:18:00", "1900-01-01 15:19:00", "1900-01-01 15:20:00", "1900-01-01 15:21:00", "1900-01-01 15:22:00", "1900-01-01 15:23:00", "1900-01-01 15:24:00", "1900-01-01 15:25:00", "1900-01-01 15:26:00", "1900-01-01 15:27:00", "1900-01-01 15:28:00", "1900-01-01 15:29:00", "1900-01-01 15:30:00"], "MS": [645.0000000000001, 2846.9999999999977, 5492.999999999998, 8723.999999999998, 10550.999999999998, 11795.999999999996, 15137.999999999996, 16073.999999999996, 15686.999999999998, 15396.0, 12968.0, 10362.0, 14407.999999999996, 20040.0, 20140.0, 21074.0, 21515.0, 19800.0, 20876.0, 22700.0, 22552.0, 24084.0, 25948.0, 26598.0, 30552.0, 30845.0, 30493.0, 32948.0, 32516.0, 34235.0, 34088.0, 34432.0, 30924.0, 30424.0, 30316.0, 34448.0, 38392.0, 36733.0, 35613.0, 35028.0, 37752.0, 39074.0, 38739.0, 39440.0, 39220.0, 38456.0, 40772.0, 40318.0, 40712.0, 40755.0, 42768.0, 43253.0, 45699.0, 43961.0, 45276.0, 43686.0, 44432.0, 44388.0, 45784.0, 45520.0, 45323.0, 44632.0, 45380.0, 44952.0, 45492.0, 47396.0, 46508.0, 47464.0, 46692.0, 47119.0, 46581.0, 47580.0, 46868.0, 46680.0, 46334.0, 47778.0, 46777.0, 47335.0, 48052.0, 48706.0, 48538.0, 48968.0, 49938.0, 50835.0, 50705.0, 52555.0, 52622.0, 53164.0, 52070.0, 50804.0, 51473.0, 51462.0, 49626.0, 49365.0, 50141.0, 50232.0, 49865.0, 50974.0, 50193.0, 49597.0, 51372.0, 51758.0, 50931.0, 52488.0, 52676.0, 52374.0, 51693.0, 52278.0, 51980.0, 51908.0, 52255.0, 52108.0, 52453.0, 51809.0, 56165.0, 55914.0, 55362.0, 56456.0, 56020.0, 56594.0, 56978.0, 56284.0, 55768.0, 55690.0, 57256.0, 56629.0, 58015.0, 58774.0, 57976.0, 57675.0, 57575.0, 57168.0, 57145.0, 58448.0, 57754.0, 57800.0, 58332.0, 57750.0, 58755.0, 59238.0, 59076.0, 58093.0, 59409.0, 59684.0, 58901.0, 59054.0, 58764.0, 58944.0, 59392.0, 58420.0, 55788.0, 53860.0, 52468.0, 49980.0, 49548.0, 51804.0, 53398.0, 52304.0, 51993.0, 52059.0, 54738.0, 54798.0, 53360.0, 52744.0, 52404.0, 52864.0, 52886.0, 52999.99999999999, 53960.0, 54558.0, 55248.0, 56360.0, 56680.0, 56268.0, 56428.0, 58880.0, 60100.0, 60676.0, 60180.0, 60384.0, 61786.0, 60947.0, 61649.0, 61231.0, 60872.0, 61056.0, 61025.0, 60514.0, 62208.0, 62444.0, 63072.0, 63537.0, 64308.0, 65003.0, 64966.0, 64971.0, 64652.0, 64809.0, 64903.0, 65760.0, 65784.0, 65565.0, 65282.0, 65904.0, 65686.0, 65662.0, 65983.0, 66095.0, 65835.0, 65766.0, 65813.0, 65177.0, 65247.0, 65591.0, 65617.0, 65354.0, 65666.0, 66020.0, 66190.0, 65596.0, 66160.0, 65193.0, 65844.0, 65653.0, 65900.0, 65372.0, 65977.0, 67496.0, 67616.0, 67904.0, 67444.0, 67668.0, 67660.0, 67436.0, 68071.0, 65872.0, 66374.0, 64719.0, 63772.0, 65062.0, 66145.0, 66332.0, 66524.0, 65998.0, 65487.0, 64914.0, 66704.0, 67938.0, 67990.0, 67193.0, 67955.0, 67433.0, 68660.0, 68628.0, 69380.0, 69740.0, 69764.0, 69796.0, 69878.0, 69916.0, 69858.0, 69376.0, 69607.0, 70218.0, 70105.0, 71423.0, 70358.0, 70056.0, 69250.0, 70054.0, 69976.0, 69440.0, 68212.0, 68282.0, 69444.0, 69858.0, 70516.0, 71605.0, 71340.0, 71044.0, 71516.0, 72452.0, 72602.0, 72512.0, 72144.0, 72118.0, 72366.0, 72737.0, 73163.0, 73132.0, 73156.0, 73404.0, 72993.0, 73011.0, 72991.0, 73072.0, 73292.0, 73300.0, 73374.0, 73148.0, 73717.0, 74095.0, 73891.0, 73660.0, 73930.0, 74044.0, 73568.0, 73600.0, 74460.0, 74728.0, 74124.0, 73284.0, 72268.0, 71645.0, 71958.0, 74250.0, 74080.0, 74022.0, 73763.0, 73076.0, 73052.0, 72612.0, 72784.0, 73762.0, 73632.0, 72612.0, 73195.0, 73836.0, 74203.0, 74356.0, 74918.0, 74964.0, 75508.0, 76236.0, 75434.0, 75840.0, 75944.0, 75780.0, 76788.0, 76152.0, 77009.0, 77188.0, 77820.0, 78234.0, 77595.0, 78207.0, 77915.0, 78225.0, 78255.0, 77634.0, 78116.0, 77514.0, 77876.0, 77891.0, 77912.0, 78068.0, 78342.0, 78516.0, 78984.0, 78970.0, 78250.0, 78326.0, 78476.0, 78314.0, 78188.0, 78218.0, 78284.0, 78284.0]};

            var traces = [];
            var time = chartData["Minute"];

            for (let col in chartData) {
                if (col !== "Minute") {
                    let pnl = chartData[col];
                    traces.push({
                        x: time,
                        y: pnl,
                        mode: 'lines+text',
                        name: col,
                        text: pnl.map((v, i) => i === pnl.length - 1 ? v.toFixed(2) : ''),
                        textposition: 'top right',
                        textfont: { size: 12 },
                        cliponaxis: false,
                        hovertemplate: 'Time: %{x}<br>PNL: %{y}<extra>%{fullData.name}</extra>'
                    });
                }
            }

            Plotly.newPlot('chart', traces, {
                title: 'Portfolio-wise Total PnL',
                xaxis: { title: 'Minute' },
                yaxis: { title: 'PnL' },
                height: 800
            });
        </script>
    </body>
    </html>
    